[Rainmeter]
Update=1000
AccurateText=1
DynamicWindowSize=1

[Metadata]
Name=Binance Futures Tracker
Author=Jaideep Mahay
Version=1
License=GNU GPLv3
Information=Live ETH Price/%Change from Binance API.

[Variables]
ColorWhite=255,255,255,255
ColorGreen=0,255,100,255
ColorRed=255,80,80,255
ColorGray=180,180,180,255
; Set to 5 for updates every 5 seconds. Don't go below 2 to avoid API bans.
Urate=2

; --- ETH MEASURES ---

[MeasureETHParent]
Measure=WebParser
URL=https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=ETHUSDT
RegExp=(?siU)priceChangePercent":"([^"]+)".*lastPrice":"([^"]+)"
UpdateRate=#Urate#

[MeasureETHChange]
Measure=WebParser
URL=[MeasureETHParent]
StringIndex=1
IfCondition=MeasureETHChange >= 0
IfTrueAction=[!SetOption MeterETHChange FontColor "#ColorGreen#"]
IfFalseAction=[!SetOption MeterETHChange FontColor "#ColorRed#"]

[MeasureETHPrice]
Measure=WebParser
URL=[MeasureETHParent]
StringIndex=2

; --- BTC MEASURES ---

[MeasureBTCParent]
Measure=WebParser
URL=https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=BTCUSDT
RegExp=(?siU)priceChangePercent":"([^"]+)".*lastPrice":"([^"]+)"
UpdateRate=#Urate#

[MeasureBTCChange]
Measure=WebParser
URL=[MeasureBTCParent]
StringIndex=1
IfCondition=MeasureBTCChange >= 0
IfTrueAction=[!SetOption MeterBTCChange FontColor "#ColorGreen#"]
IfFalseAction=[!SetOption MeterBTCChange FontColor "#ColorRed#"]

[MeasureBTCPrice]
Measure=WebParser
URL=[MeasureBTCParent]
StringIndex=2

; --- TIME MEASURE (To show it is alive) ---

[MeasureTime]
Measure=Time
Format=%H:%M:%S

; --- METERS ---

[MeterBackground]
Meter=Shape
Shape=Rectangle 0,0,280,95,12,12 | Fill Color 30,30,30,220 | StrokeWidth 2 | Stroke Color 120,120,120,255
; Click the background to force an update immediately
LeftMouseUpAction=[!CommandMeasure MeasureETHParent "Update"][!CommandMeasure MeasureBTCParent "Update"]
ToolTipText="Click to force refresh"
AntiAlias=1

[MeterTitle]
Meter=String
Text=Binance Futures Tracker
X=10
Y=5
FontSize=9
FontColor=#ColorGray#
FontFace=Segoe UI
AntiAlias=1

; ETH Row
[MeterETHLabel]
Meter=String
Text=ETH
X=10
Y=28
FontSize=13
FontColor=#ColorWhite#
FontFace=Segoe UI Semibold
AntiAlias=1

[MeterETHPrice]
Meter=String
MeasureName=MeasureETHPrice
X=65
Y=28
FontSize=13
FontColor=#ColorWhite#
FontFace=Segoe UI Semibold
Text=%1
NumOfDecimals=2
AntiAlias=1

[MeterETHChange]
Meter=String
MeasureName=MeasureETHChange
X=270
Y=30
FontSize=11
FontFace=Segoe UI Bold
StringAlign=Right
Text=%1%
NumOfDecimals=2
AntiAlias=1

; BTC Row
[MeterBTCLabel]
Meter=String
Text=BTC
X=10
Y=53
FontSize=13
FontColor=#ColorWhite#
FontFace=Segoe UI Semibold
AntiAlias=1

[MeterBTCPrice]
Meter=String
MeasureName=MeasureBTCPrice
X=65
Y=53
FontSize=13
FontColor=#ColorWhite#
FontFace=Segoe UI Semibold
Text=%1
NumOfDecimals=2
AntiAlias=1

[MeterBTCChange]
Meter=String
MeasureName=MeasureBTCChange
X=270
Y=55
FontSize=11
FontFace=Segoe UI Bold
StringAlign=Right
Text=%1%
NumOfDecimals=2
AntiAlias=1

; Status Bar (Shows last update time)
[MeterLastUpdate]
Meter=String
MeasureName=MeasureTime
Text=Last sync: %1 (Click to Refresh)
X=10
Y=78
FontSize=7
FontColor=100,100,100,255
FontFace=Segoe UI
AntiAlias=1